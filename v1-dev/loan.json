{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Loan Schema",
  "description": "Data schema defining the characteristics of a loan product.",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    },
    "date": {
      "description": "YYYY-MM-DDTHH:MM:SSZ in accordance with ISO 8601.",
      "type": "string",
      "format": "date-time"
    },
    "accounting_treatment": {
      "description": "The treatment of an account is determined by which accounting principles are applied (e.g. International Financial Reporting Standards (IFRS), US Generally Accepted Accounting Principles (GAAP), UK GAAP etc.). For example, the treatment of expense is determined by the principles (IFRS/US GAAP/UK GAAP) that underly the process of reporting when expenses are incurred, and when they are then debited and credit impact is taken (and so on).",
      "type": "string"
    },
    "accrued_interest_balance": {
      "description": "The accrued interest due at the next payment date. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer"
    },
    "administration": {
      "description": "How the loan was administered by the lender.",
      "type": "string",
      "enum": ["principal", "other"]
    },
    "arrears_arrangement": {
      "description": "The arrangement the lender has made with the borrower regarding the amount referenced in the arrears_balance.",
      "type": "string",
      "enum": ["temporary", "formal", "possessed", "none"]
    },
    "arrears_balance": {
      "description": "The balance of the loan or capital amount that is considered to be in arrears. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer"
    },
    "asset_liability": {
      "description": "Is the derivative an asset or a liability from the firm point of view?",
      "type": "string",
      "enum": ["asset", "liability"]
    },
    "balance": {
      "description": "The balance of the loan or capital still to be repaid. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer"
    },
    "base_rate": {
      "type": "string",
      "enum": ["ZERO", "UKBRBASE", "FDTR"]
    },
    "currency_code": {
      "$ref": "https://raw.githubusercontent.com/SuadeLabs/fire/master/v1-dev/types.json#/currency_code"
    },
    "customers": {
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "income_amount": {
            "description": "The reference income used for the customer(s) for this loan. Monetary type represented as an integer number of cents/pence.",
            "type": "integer",
            "minimum": 0
          }
        },
        "required": ["id", "income_amount"]
      }
    },
    "encumbrance_amount": {
      "type": "integer",
      "minimum": 0
    },
    "end_date": {
      "type": "string",
      "format": "date-time"
    },
    "facility_currency_code": {
      "description": "The currency of the credit facility if not the same as loan currency_code.",
      "$ref": "https://raw.githubusercontent.com/SuadeLabs/fire/master/v1-dev/types.json#/currency_code"
    },
    "impairment_amount": {
      "type": "integer",
      "minimum": 0
    },
    "impairment_type": {
      "type": "string",
      "enum": ["collective", "individual", "write_off", "none"]
    },
    "issuer_id": {
      "description": "The 20-digit Legal Entity Identifier for the issuer.",
      "type": "string",
      "minLength": 20,
      "maxLength": 20
    },
    "limit_amount": {
      "description": "The total credit limit on the loan. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer",
      "minimum": 0
    },
    "lnrf_amount": {
      "description": "The total amount of non-recourse funding linked to the loan. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer",
      "minimum": 0
    },
    "movement": {
      "type": "string",
      "enum": ["none", "acquired", "sold", "securitised", "other"]
    },
    "notional_amount": {
      "description": "The original notional amount of the loan. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer"
    },
    "on_balance_sheet": {
      "description": "Is the loan reported on the balance sheet of the financial institution?",
      "type": "boolean"
    },
    "originator_id": {
      "type": "string"
    },
    "originator_type": {
      "type": "string",
      "enum": ["mortgage_lender", "spv", "other"]
    },
    "product_name": {
      "description": "The name of the product as given by the financial institution to be used for display and reference purposes.",
      "type": "string"
    },
    "provision_amount": {
      "description": "The amount of the account that is provisioned by the financial institution. Monetary type represented as a naturally positive integer number of cents/pence.",
      "type": "integer",
      "minimum": 0
    },
    "provision_type": {
      "type": "string",
      "enum": ["none", "other"]
    },
    "purpose": {
      "type": "string",
      "enum": [
        "house_purchase", "first_time_buyer", "buy_to_let", "buy_to_let_house_purchase", "buy_to_let_remortgage", "buy_to_let_further_advance",
        "buy_to_let_other", "remortgage", "remortgage_other", "lifetime_mortgage", "bridging_loan", "further_advance", "other"
      ]
    },
    "rate": {
      "description": "The full interest rate applied to the loan balance. Note that for tracker rates this includes the benchmark (ie. not the credit spread). Percentages represented as a decimal/float such that 1.5% is 0.015.",
      "type": "number"
    },
    "rate_type": {
      "type": "string",
      "enum": ["fixed", "variable", "tracker", "combined"]
    },
    "regulated": {
      "description": "Is this loan regulated or unregulated?",
      "type": "boolean"
    },
    "repayment_frequency": {
      "description": "Repayment frequency of the loan refers to how often the repayments occur.",
      "type": "string",
      "enum": ["daily", "weekly", "bi_weekly", "monthly", "quarterly", "semi_annually", "annually", "at_maturity"]
    },
    "repayment_type": {
      "description": "Repayment type of the loan refers to whether the customer will be repaying capital + interest, just interest or a combination of the two.",
      "type": "string",
      "enum": ["repayment", "interest_only", "combined", "other"]
    },
    "risk_country_code": {
      "description": "Two-letter country code describing where the risk for the security resides. In accordance with ISO 3166-1",
      "$ref": "https://raw.githubusercontent.com/SuadeLabs/fire/master/v1-dev/types.json#/country_code"
    },
    "secured": {
      "description": "Is this loan secured or unsecured?",
      "type": "boolean"
    },
    "securitised": {
      "type": "boolean"
    },
    "sources": {
      "description": "Identifiers for data sources. Useful for analytics and MI purposes.",
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string"
      }
    },
    "start_date": {
      "type": "string",
      "format": "date-time"
    },
    "status": {
      "type": "string",
      "enum": ["actual", "committed", "cancelled", "defaulted"]
    },
    "type": {
      "type": "string",
      "enum": [
        "mortgage", "commercial_property", "commercial", "personal", "auto",
        "trade_finance", "credit_card", "credit_facility", "multiccy_facility", "overdraft", "other"
      ]
    }
  },
  "required": ["id", "date"],
  "additionalProperties": true
}
